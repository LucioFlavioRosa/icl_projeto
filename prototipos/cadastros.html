<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Cadastros | Gestão de Frestes</title>
  <link rel="stylesheet" href="https://bra.icl-group.com/wp-content/themes/hello-elementor/style.css?ver=6.8.3">
  <link rel="stylesheet" href="https://bra.icl-group.com/wp-content/themes/icl/css/general.min.css?ver=1761724536">
  <link rel="stylesheet" href="https://bra.icl-group.com/wp-content/themes/icl/css/new-styles.min.css?ver=1761724536">
  <link rel="stylesheet" href="https://bra.icl-group.com/wp-content/plugins/elementor/assets/lib/font-awesome/css/all.min.css?ver=1761639274">
  <style>
    body { font-family: 'Demo', 'Inter', sans-serif; background: #f6f9fa; margin: 0; }
    .main-header { background: #002846; color: #fff; padding: 0; }
    .main-header nav { display: flex; gap: 32px; align-items: center; }
    .main-header nav a { color: #fff; text-decoration: none; font-weight: 500; padding: 18px 24px; border-radius: 33px; transition: background .2s; }
    .main-header nav a.active, .main-header nav a:hover { background: #00B5D3; color: #fff; }
    .container { max-width: 1200px; margin: 32px auto; padding: 0 24px; }
    h1 { color: #002846; font-size: 2.2rem; margin-bottom: 24px; }
    .grid-cards { display: flex; flex-wrap: wrap; gap: 28px; margin-bottom: 32px; }
    .cad-card { background: #fff; border-radius: 16px; box-shadow: 0 2px 12px rgba(0,0,0,0.06); flex: 1 1 220px; min-width: 220px; max-width: 260px; padding: 32px 24px; display: flex; flex-direction: column; align-items: center; position: relative; }
    .cad-card .icon { font-size: 2.2rem; margin-bottom: 12px; color: #00B5D3; }
    .cad-card .title { font-size: 1.08rem; font-weight: 500; color: #002846; margin-bottom: 6px; }
    .cad-card .count { font-size: 0.95rem; color: #54595F; margin-bottom: 10px; }
    .cad-card .btn-gerenciar { background: #00B5D3; color: #fff; border: none; border-radius: 8px; padding: 8px 18px; font-size: 1rem; cursor: pointer; margin-top: 8px; transition: background .2s; }
    .cad-card .btn-gerenciar:hover { background: #002846; }
    .modal-bg { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100vw; height: 100vh; background: rgba(0,40,70,0.18); }
    .modal { display: none; position: fixed; z-index: 1001; left: 50%; top: 50%; transform: translate(-50%, -50%); background: #fff; border-radius: 18px; box-shadow: 0 8px 32px rgba(0,181,211,0.16); width: 98vw; max-width: 600px; max-height: 90vh; overflow-y: auto; padding: 32px 28px; }
    .modal-header { font-size: 1.3rem; font-weight: 500; color: #002846; margin-bottom: 18px; }
    .modal-close { position: absolute; right: 22px; top: 18px; font-size: 1.4rem; color: #002846; cursor: pointer; }
    .crud-table { width: 100%; border-collapse: collapse; margin-bottom: 18px; background: #f8fbfc; border-radius: 8px; overflow: hidden; }
    .crud-table th, .crud-table td { padding: 8px 12px; border-bottom: 1px solid #e1e9ee; text-align: left; font-size: 0.98rem; }
    .crud-table th { background: #00B5D3; color: #fff; font-weight: 500; }
    .crud-table tr:last-child td { border-bottom: none; }
    .crud-actions { display: flex; gap: 8px; }
    .crud-btn { background: #00B5D3; color: #fff; border: none; border-radius: 8px; padding: 6px 14px; font-size: 0.98rem; cursor: pointer; transition: background .2s; }
    .crud-btn:hover { background: #002846; }
    .form-section { margin-bottom: 18px; }
    .form-section label { font-weight: 500; color: #002846; display: block; margin-bottom: 6px; }
    .form-section input, .form-section select { width: 100%; padding: 7px 12px; border: 1px solid #00284640; border-radius: 8px; font-size: 1rem; margin-bottom: 8px; }
    .form-section .multi-list { margin-bottom: 8px; }
    .form-section .multi-list input { width: calc(100% - 36px); display: inline-block; margin-right: 4px; }
    .form-section .multi-list .remove-btn { background: #cf2e2e; color: #fff; border: none; border-radius: 6px; padding: 4px 10px; font-size: 0.9rem; cursor: pointer; }
    .form-section .add-btn { background: #00B5D3; color: #fff; border: none; border-radius: 6px; padding: 6px 14px; font-size: 0.98rem; cursor: pointer; margin-top: 6px; }
    .janela-table { width: 100%; border-collapse: collapse; margin-bottom: 8px; background: #f8fbfc; border-radius: 8px; }
    .janela-table th, .janela-table td { padding: 6px 10px; border-bottom: 1px solid #e1e9ee; text-align: left; font-size: 0.95rem; }
    .janela-table th { background: #00B5D3; color: #fff; font-weight: 500; }
    .janela-table tr:last-child td { border-bottom: none; }
    .janela-table .edit-btn { background: #fcb900; color: #002846; border: none; border-radius: 6px; padding: 4px 10px; font-size: 0.9rem; cursor: pointer; }
    @media (max-width: 900px) { .grid-cards { flex-direction: column; } .container { padding: 0 8px; } .modal { max-width: 98vw; } }
  </style>
</head>
<body>
  <header class="main-header">
    <nav aria-label="Menu principal">
      <a href="relatorios.html">Relatórios</a>
      <a href="cadastros.html" class="active">Cadastros</a>
      <a href="gestao-usuarios.html">Gestão de Usuários</a>
    </nav>
  </header>
  <main class="container">
    <h1>Hub de Cadastros</h1>
    <section class="grid-cards">
      <div class="cad-card" data-type="fornecedores">
        <span class="icon"><i class="fas fa-industry"></i></span>
        <span class="title">Fornecedores</span>
        <span class="count" id="count-fornecedores">3 cadastrados</span>
        <button class="btn-gerenciar">Gerenciar</button>
      </div>
      <div class="cad-card" data-type="transportadoras">
        <span class="icon"><i class="fas fa-shipping-fast"></i></span>
        <span class="title">Transportadoras</span>
        <span class="count" id="count-transportadoras">2 cadastradas</span>
        <button class="btn-gerenciar">Gerenciar</button>
      </div>
      <div class="cad-card" data-type="veiculos">
        <span class="icon"><i class="fas fa-truck"></i></span>
        <span class="title">Tipos de Veículo</span>
        <span class="count" id="count-veiculos">4 tipos</span>
        <button class="btn-gerenciar">Gerenciar</button>
      </div>
      <div class="cad-card" data-type="locais">
        <span class="icon"><i class="fas fa-map-marker-alt"></i></span>
        <span class="title">Locais de Descarga</span>
        <span class="count" id="count-locais">5 locais</span>
        <button class="btn-gerenciar">Gerenciar</button>
      </div>
      <div class="cad-card" data-type="unidades">
        <span class="icon"><i class="fas fa-balance-scale"></i></span>
        <span class="title">Unidades de Medida</span>
        <span class="count" id="count-unidades">6 unidades</span>
        <button class="btn-gerenciar">Gerenciar</button>
      </div>
    </section>
    <div class="modal-bg" id="modalBg"></div>
    <div class="modal" id="modalCrud" aria-modal="true" role="dialog">
      <span class="modal-close" id="closeModal" aria-label="Fechar modal">&times;</span>
      <div class="modal-header" id="modalHeader">Gerenciar</div>
      <div id="modalContent"></div>
    </div>
  </main>
  <script>
    // Mock de dados
    const cadastros = {
      fornecedores: [{nome:'Fornecedor A', cnpj:'12.345.678/0001-99', frete:'FOB'}, {nome:'Fornecedor B', cnpj:'98.765.432/0001-11', frete:'CIF'}, {nome:'Fornecedor C', cnpj:'11.222.333/0001-44', frete:'FOB'}],
      transportadoras: [{nome:'Transp. Alfa', cnpj:'22.333.444/0001-55'}, {nome:'Transp. Beta', cnpj:'33.444.555/0001-66'}],
      veiculos: [{tipo:'Truck'}, {tipo:'Carreta'}, {tipo:'VUC'}, {tipo:'Bitrem'}],
      locais: [{nome:'Unidade SP'}, {nome:'Unidade RJ'}, {nome:'Unidade MG'}, {nome:'Unidade BA'}, {nome:'Unidade PR'}],
      unidades: [{un:'Caixa'}, {un:'Palete'}, {un:'Big Bag'}, {un:'Litro'}, {un:'Tonelada'}, {un:'Kg'}]
    };
    // Modal CRUD
    const modalBg = document.getElementById('modalBg');
    const modalCrud = document.getElementById('modalCrud');
    const modalHeader = document.getElementById('modalHeader');
    const modalContent = document.getElementById('modalContent');
    document.querySelectorAll('.btn-gerenciar').forEach((btn, idx) => {
      btn.addEventListener('click', function(e) {
        const type = btn.parentElement.dataset.type;
        openCrud(type);
      });
    });
    document.getElementById('closeModal').onclick = closeModal;
    modalBg.onclick = closeModal;
    function openCrud(type) {
      modalBg.style.display = 'block';
      modalCrud.style.display = 'block';
      modalHeader.textContent = 'Gerenciar ' + capitalize(type);
      if(type==='fornecedores') renderFornecedorCrud();
      else renderGenericCrud(type);
    }
    function closeModal() {
      modalBg.style.display = 'none';
      modalCrud.style.display = 'none';
      modalContent.innerHTML = '';
    }
    function renderGenericCrud(type) {
      let rows = '';
      let headers = [];
      if(type==='transportadoras') { headers = ['Nome','CNPJ']; rows = cadastros.transportadoras.map(t=>`<tr><td>${t.nome}</td><td>${t.cnpj}</td><td class='crud-actions'><button class='crud-btn'>Editar</button><button class='crud-btn'>Excluir</button></td></tr>`).join(''); }
      if(type==='veiculos') { headers = ['Tipo']; rows = cadastros.veiculos.map(v=>`<tr><td>${v.tipo}</td><td class='crud-actions'><button class='crud-btn'>Editar</button><button class='crud-btn'>Excluir</button></td></tr>`).join(''); }
      if(type==='locais') { headers = ['Nome']; rows = cadastros.locais.map(l=>`<tr><td>${l.nome}</td><td class='crud-actions'><button class='crud-btn'>Editar</button><button class='crud-btn'>Excluir</button></td></tr>`).join(''); }
      if(type==='unidades') { headers = ['Unidade']; rows = cadastros.unidades.map(u=>`<tr><td>${u.un}</td><td class='crud-actions'><button class='crud-btn'>Editar</button><button class='crud-btn'>Excluir</button></td></tr>`).join(''); }
      modalContent.innerHTML = `
        <div class='form-section'><input type='text' placeholder='Buscar...' aria-label='Buscar'></div>
        <button class='crud-btn' style='margin-bottom:12px;'>Novo</button>
        <table class='crud-table'><thead><tr>${headers.map(h=>`<th>${h}</th>`).join('')}<th>Ações</th></tr></thead><tbody>${rows}</tbody></table>
      `;
    }
    function renderFornecedorCrud() {
      let rows = cadastros.fornecedores.map(f=>`<tr><td>${f.nome}</td><td>${f.cnpj}</td><td>${f.frete}</td><td class='crud-actions'><button class='crud-btn'>Editar</button><button class='crud-btn'>Excluir</button></td></tr>`).join('');
      modalContent.innerHTML = `
        <div class='form-section'><input type='text' placeholder='Buscar fornecedor...' aria-label='Buscar'></div>
        <button class='crud-btn' id='novoFornecedorBtn' style='margin-bottom:12px;'>Novo</button>
        <table class='crud-table'><thead><tr><th>Nome</th><th>CNPJ</th><th>Frete Padrão</th><th>Ações</th></tr></thead><tbody>${rows}</tbody></table>
      `;
      document.getElementById('novoFornecedorBtn').onclick = renderFornecedorForm;
    }
    function renderFornecedorForm() {
      modalContent.innerHTML = `
        <form id='formFornecedor'>
          <div class='form-section'>
            <label for='nomeFornecedor'>Nome do Fornecedor</label>
            <input id='nomeFornecedor' type='text' required placeholder='Ex: Fornecedor X'>
          </div>
          <div class='form-section'>
            <label for='cnpjFornecedor'>CNPJ</label>
            <input id='cnpjFornecedor' type='text' required maxlength='18' placeholder='00.000.000/0000-00' oninput='this.value=mascaraCNPJ(this.value)'>
          </div>
          <div class='form-section'>
            <label for='fretePadrao'>Tipo de Frete Padrão</label>
            <select id='fretePadrao'>
              <option value='FOB'>FOB</option>
              <option value='CIF'>CIF</option>
            </select>
          </div>
          <div class='form-section'>
            <label>Endereços</label>
            <div id='enderecosList'></div>
            <button type='button' class='add-btn' onclick='addEndereco()'>Adicionar Endereço</button>
          </div>
          <div class='form-section'>
            <label>Janelas Operacionais</label>
            <table class='janela-table' id='janelaTable'>
              <thead><tr><th>Dia</th><th>Horário Inicial</th><th>Horário Final</th><th>Ações</th></tr></thead>
              <tbody></tbody>
            </table>
            <button type='button' class='add-btn' onclick='addJanela()'>Adicionar Janela</button>
          </div>
          <button type='submit' class='crud-btn'>Salvar</button>
        </form>
      `;
      window.enderecos = [];
      window.janelas = [];
      updateEnderecos();
      updateJanelas();
      document.getElementById('formFornecedor').onsubmit = function(e){ e.preventDefault(); alert('Fornecedor cadastrado! (simulação)'); closeModal(); };
    }
    function addEndereco() { window.enderecos.push(''); updateEnderecos(); }
    function removeEndereco(idx) { window.enderecos.splice(idx,1); updateEnderecos(); }
    function updateEnderecos() {
      const container = document.getElementById('enderecosList');
      if(!container) return;
      container.innerHTML = window.enderecos.map((val,idx)=>`<div class='multi-list'><input type='text' placeholder='Endereço ${idx+1}' value='${val}' onchange='window.enderecos[${idx}]=this.value'><button type='button' class='remove-btn' onclick='removeEndereco(${idx})' aria-label='Remover Endereço'>-</button></div>`).join('');
    }
    function addJanela() { window.janelas.push({dia:'',ini:'',fim:''}); updateJanelas(); }
    function removeJanela(idx) { window.janelas.splice(idx,1); updateJanelas(); }
    function updateJanelas() {
      const tbody = document.querySelector('#janelaTable tbody');
      if(!tbody) return;
      tbody.innerHTML = window.janelas.map((j,idx)=>`<tr><td><input type='text' placeholder='Dia' value='${j.dia}' onchange='window.janelas[${idx}].dia=this.value'></td><td><input type='time' value='${j.ini}' onchange='window.janelas[${idx}].ini=this.value'></td><td><input type='time' value='${j.fim}' onchange='window.janelas[${idx}].fim=this.value'></td><td><button type='button' class='edit-btn' onclick='removeJanela(${idx})' aria-label='Remover Janela'>Remover</button></td></tr>`).join('');
    }
    function mascaraCNPJ(v) {
      v=v.replace(/\D/g,'');
      v=v.replace(/(\d{2})(\d)/,'$1.$2');
      v=v.replace(/(\d{3})(\d)/,'$1.$2');
      v=v.replace(/(\d{3})(\d)/,'$1/$2');
      v=v.replace(/(\d{4})(\d)/,'$1-$2');
      return v;
    }
    function capitalize(str) { return str.charAt(0).toUpperCase()+str.slice(1); }
    window.addEndereco = addEndereco;
    window.removeEndereco = removeEndereco;
    window.addJanela = addJanela;
    window.removeJanela = removeJanela;
    window.updateEnderecos = updateEnderecos;
    window.updateJanelas = updateJanelas;
    window.mascaraCNPJ = mascaraCNPJ;
  </script>
</body>
</html>