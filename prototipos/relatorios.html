<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Relatórios e Análises - ICL Gestão de Fretes</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="shortcut icon" type="image/png" href="https://bra.icl-group.com/wp-content/uploads/2020/12/Asset-10.png"/>
  <link rel="stylesheet" href="https://bra.icl-group.com/wp-content/themes/hello-elementor/assets/css/theme.css?ver=1761639274" media="all" />
  <link rel="stylesheet" href="https://bra.icl-group.com/wp-content/themes/icl/css/general.min.css?ver=1761724536" media="all" />
  <link rel="stylesheet" href="https://bra.icl-group.com/wp-content/themes/icl/css/new-styles.min.css?ver=1761724536" media="all" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body { background: #f6fafd; margin: 0; font-family: 'Inter', 'Demo', sans-serif; }
    .main-container { max-width: 1200px; margin: 40px auto 0 auto; background: #fff; border-radius: 18px; box-shadow: 0 4px 24px rgba(0,0,0,.05); padding: 36px 32px 32px 32px; }
    .relatorios-header { display: flex; align-items: flex-end; flex-wrap: wrap; gap: 24px; margin-bottom: 32px; }
    .relatorios-header h1 { font-size: 2.2rem; color: #002846; font-weight: 400; margin: 0 32px 0 0; }
    .relatorios-filtros { display: flex; gap: 18px; flex-wrap: wrap; align-items: flex-end; }
    .relatorios-filtros label { font-size: 15px; color: #002846; font-weight: 500; margin-bottom: 4px; display: block; }
    .relatorios-filtros select, .relatorios-filtros input[type="date"] { border: 1px solid #cce2e8; border-radius: 8px; padding: 6px 12px; font-size: 15px; background: #f6fafd; color: #002846; }
    .relatorios-filtros input[type="date"] { min-width: 140px; }
    .relatorios-export { margin-left: auto; display: flex; gap: 10px; }
    .btn-export { background: #00B5D3; color: #fff; border: none; border-radius: 8px; padding: 8px 18px; font-size: 15px; font-family: inherit; cursor: pointer; transition: background .2s; display: flex; align-items: center; gap: 7px; }
    .btn-export:hover { background: #0090a8; }
    .relatorios-charts { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 32px; margin-top: 24px; }
    .chart-card { background: #f6fafd; border-radius: 14px; padding: 24px 18px 18px 18px; box-shadow: 0 2px 10px rgba(0,0,0,0.03); display: flex; flex-direction: column; align-items: center; }
    .chart-card h2 { font-size: 1.1rem; color: #00B5D3; font-weight: 500; margin-bottom: 12px; }
    @media (max-width: 900px) {
      .main-container { padding: 18px 4vw; }
      .relatorios-charts { grid-template-columns: 1fr; gap: 24px; }
    }
  </style>
</head>
<body>
  <!-- Header reutilizável -->
  <div id="header-placeholder"></div>
  <main class="main-container">
    <div class="relatorios-header">
      <h1>Relatórios e Análises</h1>
      <form class="relatorios-filtros" id="filtrosRelatorio" onsubmit="event.preventDefault(); atualizarGraficos();">
        <div>
          <label for="tipoRelatorio">Tipo de Relatório</label>
          <select id="tipoRelatorio" name="tipoRelatorio">
            <option value="volume">Volume de Fretes</option>
            <option value="atrasos">Taxa de Atrasos</option>
            <option value="estadia">Tempo Médio de Estadia</option>
            <option value="performance-fornecedor">Performance por Fornecedor</option>
            <option value="performance-transportadora">Performance por Transportadora</option>
          </select>
        </div>
        <div>
          <label for="dataInicio">Período</label>
          <input type="date" id="dataInicio" name="dataInicio" value="2024-06-01" />
          <span style="margin: 0 6px; color: #888;">a</span>
          <input type="date" id="dataFim" name="dataFim" value="2024-06-30" />
        </div>
        <div>
          <label for="fornecedor">Fornecedor</label>
          <select id="fornecedor" name="fornecedor">
            <option value="">Todos</option>
            <option value="fornecedor1">Fornecedor 1</option>
            <option value="fornecedor2">Fornecedor 2</option>
          </select>
        </div>
        <div>
          <label for="transportadora">Transportadora</label>
          <select id="transportadora" name="transportadora">
            <option value="">Todas</option>
            <option value="transp1">Transp. Alfa</option>
            <option value="transp2">Transp. Beta</option>
          </select>
        </div>
        <div class="relatorios-export">
          <button class="btn-export" type="button" onclick="exportarExcel()"><svg width="18" height="18" fill="none" viewBox="0 0 24 24"><path d="M4 4h16v16H4V4zm2 2v12h12V6H6zm3 3h2v2h-2V9zm0 4h2v2h-2v-2zm4-4h2v2h-2V9zm0 4h2v2h-2v-2z" fill="#fff"/></svg>Excel</button>
          <button class="btn-export" type="button" onclick="exportarPDF()"><svg width="18" height="18" fill="none" viewBox="0 0 24 24"><path d="M6 2h9l5 5v15a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2zm7 7V3.5L18.5 9H13z" fill="#fff"/></svg>PDF</button>
        </div>
      </form>
    </div>
    <section class="relatorios-charts">
      <div class="chart-card">
        <h2>Volume de Fretes</h2>
        <canvas id="chartVolume"></canvas>
      </div>
      <div class="chart-card">
        <h2>Taxa de Atrasos (%)</h2>
        <canvas id="chartAtrasos"></canvas>
      </div>
      <div class="chart-card">
        <h2>Tempo Médio de Estadia (h)</h2>
        <canvas id="chartEstadia"></canvas>
      </div>
    </section>
  </main>
  <script>
    // Header dinâmico reutilizável
    fetch('/prototipos/components/header.html').then(res => res.text()).then(html => {
      document.getElementById('header-placeholder').innerHTML = html;
    });
    // Dados mockados para gráficos
    let chartVolume, chartAtrasos, chartEstadia;
    function atualizarGraficos() {
      const labels = ['Semana 1', 'Semana 2', 'Semana 3', 'Semana 4'];
      const volumeData = [32, 45, 28, 50];
      const atrasoData = [8, 12, 6, 10];
      const estadiaData = [3.2, 2.8, 4.1, 3.6];
      if (chartVolume) chartVolume.destroy();
      if (chartAtrasos) chartAtrasos.destroy();
      if (chartEstadia) chartEstadia.destroy();
      chartVolume = new Chart(document.getElementById('chartVolume'), {
        type: 'bar',
        data: { labels, datasets: [{ label: 'Fretes', data: volumeData, backgroundColor: '#00B5D3' }] },
        options: { plugins: { legend: { display: false } }, scales: { y: { beginAtZero: true } } }
      });
      chartAtrasos = new Chart(document.getElementById('chartAtrasos'), {
        type: 'line',
        data: { labels, datasets: [{ label: 'Atrasos (%)', data: atrasoData, borderColor: '#cf2e2e', backgroundColor: 'rgba(207,46,46,0.1)', tension: 0.4, fill: true }] },
        options: { plugins: { legend: { display: false } }, scales: { y: { beginAtZero: true, max: 20 } } }
      });
      chartEstadia = new Chart(document.getElementById('chartEstadia'), {
        type: 'bar',
        data: { labels, datasets: [{ label: 'Estadia (h)', data: estadiaData, backgroundColor: '#61CE70' }] },
        options: { plugins: { legend: { display: false } }, scales: { y: { beginAtZero: true } } }
      });
    }
    atualizarGraficos();
    // Exportação mock
    function exportarExcel() { alert('Exportação Excel simulada.'); }
    function exportarPDF() { alert('Exportação PDF simulada.'); }
  </script>
</body>
</html>